#!/bin/bash

# Navigate to the root directory
cd "$(git rev-parse --show-toplevel)" || exit 1

# Run tests
echo "============================================="
echo "Running tests..."
echo "============================================="
if ! npm run test; then
    echo "============================================="
    echo "❌ Tests failed. Push aborted."
    echo "============================================="
    exit 1
fi

# Check code formatting
echo "============================================="
echo "Checking code format..."
echo "============================================="
if ! npm run check-format; then
    echo "============================================="
    echo "❌ Code format check failed. Push aborted."
    echo "============================================="
    exit 1
fi

echo "============================================="
echo "✅ All checks passed. Proceeding with push."
echo "============================================="
exit 0